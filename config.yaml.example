# config.yaml.example

# 服务监听配置
listen:
  dns_udp: ":53"
  dns_tcp: ":53"
  doh: ":443"
  dot: ":853"
  doq: ":853"

# 自动证书申请 (Let's Encrypt)
# 如果启用，server.crt 和 server.key 将被忽略，证书将自动管理。
# 注意：需要公网 80 和 443 端口可访问。
auto_cert:
  enabled: false
  email: "your-email@example.com" # 用于接收证书过期通知
  domains:
    - "dns.example.com"
  cert_dir: "certs" # 证书缓存目录

# Bootstrap DNS (用于解析上游服务器域名)
bootstrap_dns:
  - "223.5.5.5:53"
  - "8.8.8.8:53"

# 上游服务器配置
upstreams:
  cn:
    # 示例：国内UDP DNS
    - address: "223.5.5.5:53"
      protocol: "udp"
      ecs_ip: "114.114.114.114"
    # 示例：国内DoT DNS (开启Pipelining)
    - address: "tls://223.6.6.6:853"
      protocol: "dot"
      ecs_ip: "114.114.114.114"
      pipeline: true
      insecure_skip_verify: false
  overseas:
    # 示例：海外DoH DNS (支持H3, 验证证书)
    - address: "https://1.1.1.1/dns-query"
      protocol: "doh"
      ecs_ip: "8.8.8.8"
      http3: true
      insecure_skip_verify: false
    # 示例：海外DoT DNS (开启Pipelining)
    - address: "tls://8.8.8.8:853"
      protocol: "dot"
      ecs_ip: "8.8.8.8"
      pipeline: true
    # 示例：海外DoQ DNS
    - address: "quic://dns.nextdns.io:853" 
      protocol: "doq"
      ecs_ip: "8.8.8.8"

# GeoIP/GeoSite数据文件路径及下载地址
geo_data:
  geoip_dat: "GeoIP.dat"
  geosite_dat: "GeoSite.dat"
  geoip_download_url: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat"
  geosite_download_url: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat"

# 注意：
# 自定义Hosts配置请在程序运行目录下创建 'hosts.txt' 文件。
# 格式: IP 域名 (标准hosts格式)
# 示例:
# 127.0.0.1 example.com
# 0.0.0.0   ads.example.com

# 自定义分流规则请在程序运行目录下创建 'rule.txt' 文件。
# 格式: 域名 策略 (cn 或 overseas)
# 示例:
# google.com overseas
# baidu.com cn
